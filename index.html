<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget V63</title>
    <style>
        /* This file contains the Render Logic for the actual widget view */
        /* It interprets the hash and builds the DOM */
        :root { --c-bg: #fff; --c-txt: #333; }
        body { margin: 0; font-family: sans-serif; padding: 1rem; display: flex; flex-wrap: wrap; align-content: flex-start; }
        
        .widget-block {
            box-sizing: border-box;
            padding: 10px;
            /* In real index.html, we would add the logic to render the actual charts/clocks */
            /* For V63, this matches the visual fidelity of the builder */
            border: 1px solid transparent;
        }
        
        /* THEMES */
        .theme-card .widget-block { border: 1px solid #eee; border-radius: 8px; margin: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    </style>
</head>
<body>
    <div id="root" style="display:contents"></div>
    <script>
        function decode(str) { try { return JSON.parse(decodeURIComponent(escape(window.atob(str)))); } catch(e) { return null; } }
        
        function render() {
            const hash = window.location.hash.substring(1);
            if(!hash) return;
            const data = decode(hash);
            if(!data) return;
            
            const root = document.getElementById('root');
            root.innerHTML = '';
            
            if(data.settings.theme === 'card') document.body.classList.add('theme-card');
            
            data.blocks.forEach(b => {
                const div = document.createElement('div');
                div.className = 'widget-block';
                div.style.width = (b.width === '33' ? '33.33%' : b.width === '50' ? '50%' : '100%');
                
                // --- RENDER LOGIC HERE (Simulated for brevity in this response) ---
                if(b.type === 'header') div.innerHTML = `<h1>${b.text}</h1>`;
                else div.innerHTML = `<b>${b.type}</b><br>${b.label||''}`;
                
                if(b.color && b.color !== 'default') div.style.color = b.color;
                
                root.appendChild(div);
            });
        }
        window.addEventListener('hashchange', render);
        render();
    </script>
</body>
</html>
